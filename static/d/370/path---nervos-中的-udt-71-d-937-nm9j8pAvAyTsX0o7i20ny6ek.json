{"data":{"site":{"siteMetadata":{"title":"Haichao Blog","author":"Haichao Zhu"}},"markdownRemark":{"id":"2d11227f-30d1-5037-8661-0286e519e8c2","excerpt":"一个支持智能合约的公有无许可区块链系统究竟能用来做什么是一个大家都很关注，也都很想弄明白的事。虽然有不少人都声称在做公链，都认可它的未来，可目前并没有人能从方法论的角度说明白它到底有什么用。可喜的是从历史经验的角度，我们其实已经看到了一些公链的应用。而这其中最为浓墨重彩的一笔就是 User Defiend Token…","html":"<p>一个支持智能合约的公有无许可区块链系统究竟能用来做什么是一个大家都很关注，也都很想弄明白的事。虽然有不少人都声称在做公链，都认可它的未来，可目前并没有人能从方法论的角度说明白它到底有什么用。可喜的是从历史经验的角度，我们其实已经看到了一些公链的应用。而这其中最为浓墨重彩的一笔就是 User Defiend Token （UDT）。</p>\n<p>顾名思义，UDT 就是用户自己定义并发行的 Token。2017年到2018年间，形形色色的用户和项目在 Ethereum 上发行了各种各种样的 UDT。其中大部分 Token 是以 ERC20 的形式出现，往往被用来融资（ICO）或者用做各种各样的 Utility Token，比如 0x 的治理 Token 或者是交易所的权益 Token。也有一部分是以 ERC721 的形式被发行，比如大家熟知的加密喵喵。除此之外也有其他更加复杂一些的 Token，比如定义身份的 ERC725。这些 Token 虽然看起来各不相同，但本质上都是 UDT。</p>\n<p>在加密经济这个伟大的愿景中，我们希望能够将各种各样的<strong>资产</strong>映射到一个绝对安全去中心化的公链上，并用 UDT 作为这些资产的代表。通过在线上交易各种各样 UDT 的来交易资产，从而提高各种资产的流动性，并最终提高社会资源的配置的效率，届时我们将不再需要法币这种罪恶的信用货币，自由市场的光辉将闪耀在我们从碳基文明跨向硅基文明的道路上（并不</p>\n<p>Nervos Network 就是一个为了实现加密经济的愿景而设计的一套底层协议。Nervos 采用了一个分层的底层架构：由<strong>保障资产安全性和去中心化</strong>的 Layer1 CKB，和各种用于<strong>交易资产</strong>的 Layer2 系统构成。而这个描述中的“资产”在 Nervos 中就是以 UDT 的形式存在。</p>\n<p>那么，在这样一个分层的系统中，UDT 究竟是如何在 Layer1 产生的？它是以怎样的形式存在的？它又会如何被转移到 Layer2 上，并且被交易的？这篇文章尝试解答这些问题。</p>\n<h2>发行</h2>\n<blockquote>\n<p>希望你先对 CKB 的 Cell 模型以及 CKB 的经济模型有一定的了解哦～</p>\n</blockquote>\n<p>在 Nervos 中，UDT 会由两部分组成：UDT 的状态和状态更新的逻辑规则。这两个概念有点抽象，先举个例子：对于某个 ERC20 代币，Alice 拥有10个而 Bob 拥有20个。对于这个代币，Alice 和 Bob 拥有这个代币的数量（即 balance）就是一种状态；而在 Alice 想要发送交易对这个代币的状态进行更新的时候（比如 Alice 给 Bob 转10个币），我们需要验证这笔交易是否符合定义这个 UDT 时预先规定的逻辑和规则。比如我们需要验证转的代币的数量不能超过 Alice 的 balance，也不能为负数。</p>\n<p>Nervos CKB 中的 UDT 设计模式与以太坊有所不同。在以太坊上，逻辑和状态是一起存在于一个智能合约里面的，即一个 ERC20 合约里既保存了这个 Token 的逻辑，也保存了每个用户的 Balance。在 CKB 上，状态和逻辑是分开保存在不同的 Cell 中的。</p>\n<p>在发行 UDT 时，首先要创建一个包含了该 UDT 的逻辑规则的 Cell。这个 Cell 将由发行者创造，并由发行者提供创造这个 Cell 所需要的 CKB。产生的 Cell 长这样</p>\n<p>而每个用户拥有这个 UDT 的 balance，是保存在用户自己的 Cell 里的。产生的 Cell 长这样</p>\n<p>UDT 的发行应在 Layer1 上进行。发行在 Layer1 上的 UDT，其安全性将由 Layer1 的安全性来保证，若是凭空发行或者</p>\n<p>Layer2 本身</p>\n<h2>转移</h2>\n<h2>交易</h2>\n<h2>退出</h2>","frontmatter":{"title":"Nervos 中的 UDT","date":"March 19, 2019","description":"基于 Nervos CKB 平台构建 User Defined Token 是一个怎样的过程呢？"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/Nervos 中的 UDT/","previous":null,"next":{"fields":{"slug":"/公链经济模型的可持续发展性/"},"frontmatter":{"title":"公链经济模型的可持续发展性"}}}}